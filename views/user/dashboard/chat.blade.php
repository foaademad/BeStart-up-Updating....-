@extends('layouts.dashboard_base')

@push('styles')
    <link rel="stylesheet" href="{{ asset('assets/css/dashboard/gpt.css') }}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-dark.min.css">
@endpush


@section('med_title', 'AI Be Startup GPT')

@section('content')

    <div class="box-content">
        @include('parts.med_screen')


        <div class="chat-box">
            <div class="chat-container">
                <button class="new-chat-button" onclick="newChat()">New Chat</button>
                <div class="recent-chats">
                <ul>
                    <li class='active'><i class="far fa-comment-alt"></i> Chat topic #1</li>

                </ul>
            </div>
            </div>

            <div class="analysis-container">
                <div class="icon-chat">
                    <div class="underpages" >
                        <p>{{ \Illuminate\Support\Str::limit($chat->description, 90, '...') }}</p>

                    </div>
                    <div class='icons'>
                        <span class="history" onclick="toggleHistory()">
                          <svg xmlns="http://www.w3.org/2000/svg" width="42" height="42" viewBox="0 0 24 24" fill="none">
                            <path d="M12 8V12L14.5 14.5" stroke="#8646F4" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M5.60423 5.60423L5.0739 5.0739V5.0739L5.60423 5.60423ZM4.33785 6.87061L3.58786 6.87438C3.58992 7.28564 3.92281 7.61853 4.33408 7.6206L4.33785 6.87061ZM6.87963 7.63339C7.29384 7.63547 7.63131 7.30138 7.63339 6.88717C7.63547 6.47296 7.30138 6.13549 6.88717 6.13341L6.87963 7.63339ZM5.07505 4.32129C5.07296 3.90708 4.7355 3.57298 4.32129 3.57506C3.90708 3.57715 3.57298 3.91462 3.57507 4.32882L5.07505 4.32129ZM3.75 12C3.75 11.5858 3.41421 11.25 3 11.25C2.58579 11.25 2.25 11.5858 2.25 12H3.75ZM16.8755 20.4452C17.2341 20.2378 17.3566 19.779 17.1492 19.4204C16.9418 19.0619 16.483 18.9393 16.1245 19.1468L16.8755 20.4452ZM19.1468 16.1245C18.9393 16.483 19.0619 16.9418 19.4204 17.1492C19.779 17.3566 20.2378 17.2341 20.4452 16.8755L19.1468 16.1245ZM5.14033 5.07126C4.84598 5.36269 4.84361 5.83756 5.13505 6.13191C5.42648 6.42626 5.90134 6.42862 6.19569 6.13719L5.14033 5.07126ZM18.8623 5.13786C15.0421 1.31766 8.86882 1.27898 5.0739 5.0739L6.13456 6.13456C9.33366 2.93545 14.5572 2.95404 17.8017 6.19852L18.8623 5.13786ZM5.0739 5.0739L3.80752 6.34028L4.86818 7.40094L6.13456 6.13456L5.0739 5.0739ZM4.33408 7.6206L6.87963 7.63339L6.88717 6.13341L4.34162 6.12062L4.33408 7.6206ZM5.08784 6.86684L5.07505 4.32129L3.57507 4.32882L3.58786 6.87438L5.08784 6.86684ZM12 3.75C16.5563 3.75 20.25 7.44365 20.25 12H21.75C21.75 6.61522 17.3848 2.25 12 2.25V3.75ZM12 20.25C7.44365 20.25 3.75 16.5563 3.75 12H2.25C2.25 17.3848 6.61522 21.75 12 21.75V20.25ZM16.1245 19.1468C14.9118 19.8483 13.5039 20.25 12 20.25V21.75C13.7747 21.75 15.4407 21.2752 16.8755 20.4452L16.1245 19.1468ZM20.25 12C20.25 13.5039 19.8483 14.9118 19.1468 16.1245L20.4452 16.8755C21.2752 15.4407 21.75 13.7747 21.75 12H20.25ZM6.19569 6.13719C7.68707 4.66059 9.73646 3.75 12 3.75V2.25C9.32542 2.25 6.90113 3.32791 5.14033 5.07126L6.19569 6.13719Z" fill="#8646F4"/>
                            </svg>
                      </span>
                        <span>
                          <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 10L20.2 1.8M20.9992 5.8V1H16.1992M10 1H8C3 1 1 3 1 8V14C1 19 3 21 8 21H14C19 21 21 19 21 14V12" stroke="#8646F4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        </span>
                        <span  onclick="newChat()">
                          <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                             <path d="M8.5 11V16.5556M13.5 11V16.5556M1 5.44444H21M3.5 8.77778V17.6667C3.5 19.5077 5.17894 21 7.25 21H14.75C16.8211 21 18.5 19.5077 18.5 17.6667V8.77778M7.25 3.22222C7.25 1.99492 8.36929 1 9.75 1H12.25C13.6307 1 14.75 1.99492 14.75 3.22222V5.44444H7.25V3.22222Z" stroke="#8646F4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                         </svg>
                        </span>
                    </div>
                </div>

                <div class="all-chat" id='chat'>
{{--                <div class="prompt-area-chat">--}}
{{--                    <div class="icon">--}}
{{--                        <span>--}}

{{--                            <img src="{{ asset('assets/imgs'. $chat->logo) }}" alt="{{ $chat->name }}" srcset="" style="border-radius:50%; max-width:40px;">--}}
{{--                       </span>--}}
{{--                    </div>--}}
{{--                    <pre id="msg-output" class='pre-load' style="margin-bottom: 10px;">--}}
{{--                            <div class="typing">--}}
{{--                              <span></span>--}}
{{--                              <span></span>--}}
{{--                              <span></span>--}}
{{--                          </div>--}}
{{--                    </pre>--}}
{{--                </div>--}}

                </div>

                <div class="welcome">
                    <h4 class="welcome-msg">What can I help with?</h4>
                </div>

                <div class="history-box" >

                    <button class="new-chat-button" onclick="newChat()">New Chat</button>
                    <div class="recent-chats">

                        <ul>
                            <li><i class="far fa-comment-alt"></i> Chat topic #1</li>
                        </ul>
                    </div>

                </div>
                <div class="overlay-history">
                </div>

                <div class="box-chat">

                    <div class="input-area">
                            <textarea name="" id="textarea-chat" rows="1" placeholder="Enter a prompt here"></textarea>
                            <input type="file" id="file-input" style="display: none;"/>
                            <input type="hidden" id="prompt" value='{{ $chat->prompt }}'/>
                            <input type="hidden" id="chat_code" value='{{ $chat->chat_code }}'/>

                            <div class="actions">
                                <span id="upload">
                                  <svg viewBox="0 0 12 23" fill="none">
                                        <g id="attachment">
                                            <mask id="path-1-inside-1_2130_26480" fill="white">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M10.05 3.40313V16.9031C10.05 19.1394 8.23625 20.9531 5.99998 20.9531C3.7637 20.9531 1.94998 19.1394 1.94998 16.9031V4.75313C1.94998 3.26205 3.1589 2.05313 4.64998 2.05313C6.14105 2.05313 7.34998 3.26205 7.34998 4.75313V16.9031C7.34998 17.6483 6.74518 18.2531 5.99998 18.2531C5.25478 18.2531 4.64998 17.6483 4.64998 16.9031V6.10313H3.29998V16.9031C3.29998 18.3942 4.5089 19.6031 5.99998 19.6031C7.49105 19.6031 8.69998 18.3942 8.69998 16.9031V4.75313C8.69998 2.51685 6.88625 0.703125 4.64998 0.703125C2.4137 0.703125 0.599976 2.51685 0.599976 4.75313V17.5781C0.932751 20.241 3.24665 22.3031 5.99998 22.3031C8.7533 22.3031 11.0672 20.241 11.4 17.5781V3.40313H10.05Z"/>
                                            </mask>
                                            <path d="M10.05 3.40313V0.903125C8.66926 0.903125 7.54998 2.02241 7.54998 3.40313H10.05ZM4.64998 6.10313H7.14998C7.14998 4.72241 6.03069 3.60313 4.64998 3.60313V6.10313ZM3.29998 6.10313V3.60313C1.91926 3.60313 0.799976 4.72241 0.799976 6.10313H3.29998ZM0.599976 17.5781H-1.90002C-1.90002 17.6818 -1.89358 17.7853 -1.88073 17.8881L0.599976 17.5781ZM11.4 17.5781L13.8807 17.8881C13.8935 17.7853 13.9 17.6818 13.9 17.5781H11.4ZM11.4 3.40313H13.9C13.9 2.02241 12.7807 0.903125 11.4 0.903125V3.40313ZM7.54998 3.40313V16.9031H12.55V3.40313H7.54998ZM7.54998 16.9031C7.54998 17.7587 6.85554 18.4531 5.99998 18.4531V23.4531C9.61696 23.4531 12.55 20.5201 12.55 16.9031H7.54998ZM5.99998 18.4531C5.14441 18.4531 4.44998 17.7587 4.44998 16.9031H-0.550024C-0.550024 20.5201 2.38299 23.4531 5.99998 23.4531V18.4531ZM4.44998 16.9031V4.75313H-0.550024V16.9031H4.44998ZM4.44998 4.75313C4.44998 4.64276 4.53961 4.55312 4.64998 4.55312V-0.446875C1.77819 -0.446875 -0.550024 1.88134 -0.550024 4.75313H4.44998ZM4.64998 4.55312C4.76034 4.55312 4.84998 4.64276 4.84998 4.75313H9.84998C9.84998 1.88134 7.52176 -0.446875 4.64998 -0.446875V4.55312ZM4.84998 4.75313V16.9031H9.84998V4.75313H4.84998ZM4.84998 16.9031C4.84998 16.2676 5.36446 15.7531 5.99998 15.7531V20.7531C8.12589 20.7531 9.84998 19.029 9.84998 16.9031H4.84998ZM5.99998 15.7531C6.63549 15.7531 7.14998 16.2676 7.14998 16.9031H2.14998C2.14998 19.029 3.87406 20.7531 5.99998 20.7531V15.7531ZM7.14998 16.9031V6.10313H2.14998V16.9031H7.14998ZM4.64998 3.60313H3.29998V8.60313H4.64998V3.60313ZM0.799976 6.10313V16.9031H5.79998V6.10313H0.799976ZM0.799976 16.9031C0.799976 19.7749 3.12819 22.1031 5.99998 22.1031V17.1031C5.88961 17.1031 5.79998 17.0135 5.79998 16.9031H0.799976ZM5.99998 22.1031C8.87176 22.1031 11.2 19.7749 11.2 16.9031H6.19998C6.19998 17.0135 6.11034 17.1031 5.99998 17.1031V22.1031ZM11.2 16.9031V4.75313H6.19998V16.9031H11.2ZM11.2 4.75313C11.2 1.13614 8.26696 -1.79688 4.64998 -1.79688V3.20312C5.50554 3.20312 6.19998 3.89756 6.19998 4.75313H11.2ZM4.64998 -1.79688C1.03299 -1.79688 -1.90002 1.13614 -1.90002 4.75313H3.09998C3.09998 3.89756 3.79441 3.20312 4.64998 3.20312V-1.79688ZM-1.90002 4.75313V17.5781H3.09998V4.75313H-1.90002ZM-1.88073 17.8881C-1.39069 21.8094 1.99321 24.8031 5.99998 24.8031V19.8031C4.50009 19.8031 3.25619 18.6726 3.08068 17.2681L-1.88073 17.8881ZM5.99998 24.8031C10.0067 24.8031 13.3906 21.8094 13.8807 17.8881L8.91927 17.2681C8.74376 18.6726 7.49986 19.8031 5.99998 19.8031V24.8031ZM13.9 17.5781V3.40313H8.89998V17.5781H13.9ZM11.4 0.903125H10.05V5.90312H11.4V0.903125Z" fill="#8646F4" mask="url(#path-1-inside-1_2130_26480)"/>
                                        </g>
                                  </svg>
                                </span>


                                <button type="submit" id="send-chat">
                                <span>
                                  <svg  viewBox="0 0 42 41">
                                    <g id="Vector" >
                                    <path d="M1 20.5C1 9.4543 9.9543 0.5 21 0.5C32.0457 0.5 41 9.4543 41 20.5C41 31.5457 32.0457 40.5 21 40.5C9.9543 40.5 1 31.5457 1 20.5Z" fill="#8646F4"/>
                                    <path d="M22.1937 20.9138H14.1521M21 40.5C9.95431 40.5 1 31.5457 1 20.5C1 9.45431 9.95431 0.5 21 0.5C32.0457 0.5 41 9.45431 41 20.5C41 31.5457 32.0457 40.5 21 40.5ZM13.9242 21.9679L12.5956 25.9366C11.8679 28.1101 11.5041 29.1969 11.7652 29.8661C11.9919 30.4474 12.4789 30.888 13.0798 31.0558C13.7718 31.2489 14.8169 30.7785 16.9072 29.838L30.3077 23.8077C32.348 22.8895 33.3682 22.4305 33.6834 21.7928C33.9574 21.2388 33.9574 20.5886 33.6834 20.0346C33.3682 19.397 32.348 18.9379 30.3077 18.0197L16.8841 11.9791C14.8001 11.0413 13.7581 10.5724 13.0669 10.7648C12.4665 10.9318 11.9796 11.3713 11.7521 11.9514C11.4901 12.6194 11.85 13.7039 12.5699 15.8728L13.9268 19.9608C14.0504 20.3333 14.1122 20.5196 14.1366 20.71C14.1583 20.8791 14.158 21.0502 14.136 21.2192C14.1111 21.4096 14.0488 21.5957 13.9242 21.9679Z" stroke="#F3EDFE" stroke-linecap="round" stroke-linejoin="round"/>
                                    </g>
                                    </svg>
                                </span>
                                </button>
                            </div>

                    </div>
                </div>
            </div>


        </div>
    </div>

@endsection


@push('scripts')
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>
        const chatLogoUrl = "{{ asset('assets/imgs' . $chat->logo) }}";
        const chatName = "{{ $chat->name }}";
    </script>
    <script src="{{ asset('assets/js/dashboard/chat.js') }}"></script>
    <script>hljs.highlightAll();</script>
@endpush
